{% extends "adminlte/base.html" %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  	<link data-turbolinks-track="true" href="application-b9abcf044a0bc3e705568d103eddd00e.css" media="all" rel="stylesheet" />
</head>




<body id="wizard">
	
          

<div >
{% csrf_token %}
	<section class="form-wizard">

			<div class="step active animated fadeInRightStep">
<body id="invoice">
<div>
        <div >
    </div>

        <div id=content>
          

<div class="menubar">
        <div class="sidebar-toggler visible-xs">
                <i class="ion-navicon"></i>
        </div>

        <div class="page-title">
                ULE <strong>生产消息管理控制平台</strong>
        </div>
        <div class="options pull-right">
                <a href="#"><i class="fa fa-print"></i> Print</a>
                <a href="#"><i class="fa fa-download"></i> Download</a>
        </div>
</div>

<div >
        <div class="invoice-wrapper">
                <div class="intro">
                        Hi <strong>John McClane</strong>, 
                        <br />
                        This is the receipt for a payment of <strong>$312.00</strong> (USD) you made to Admin Themes.

                        <div class="status">Paid</div>
                </div>

                <div class="payment-info">
                        <div class="row">
                                <div class="col-sm-6">
                                        <span>Payment No.</span>
                                        <strong>883053045</strong>
                                </div>
                                <div class="col-sm-6 text-right">
                                        <span>Payment Date</span>
                                        <strong>Feb 09, 2014 - 03:44 pm</strong>
                                </div>
                        </div>
                </div>

                <div class="payment-details">
                        <div class="row">
                                <div class="col-sm-6">
                                        <span>Client</span>
                                        <strong>
                                                John McClane
                                        </strong>
                                        <p>
                                                989 5th Avenue <br>
                                                New York City <br>
                                                55839 <br>
                                                USA <br>
                                                <a href="#">
                                                        john.mcclane@gmail.com
                                                </a>
                                        </p>
                                </div>
                                <div class="col-sm-6 text-right">
                                        <span>Payment To</span>
                                        <strong>
                                                Admin Themes LLC
                                        </strong>
                                        <p>
                                                344 9th Avenue <br>
                                                San Francisco <br>
                                                99383 <br>
                                                USA <br>
                                                <a href="#">
                                                        react.themes@gmail.com
                                                </a>
                                        </p>
                                </div>
                        </div>
                </div>

                <div class="line-items">
                        <div class="headers clearfix">
                                <div class="row">
                                        <div class="col-xs-4">Description</div>
                                        <div class="col-xs-3">Quantity</div>
                                        <div class="col-xs-5 text-right">Amount</div>
                                </div>
                        </div>
                        <div class="items">
                                <div class="row item">
                                        <div class="col-xs-4 desc">
                                                React Theme Customization
                                        </div>
                                        <div class="col-xs-3 qty">
                                                3
                                        </div>
                                        <div class="col-xs-5 amount text-right">
                                                $60.00
                                        </div>
                                </div>
                                <div class="row item">
                                        <div class="col-xs-4 desc">
                                                About us Page
                                        </div>
                                        <div class="col-xs-3 qty">
                                                1
                                        </div>
                                        <div class="col-xs-5 amount text-right">
                                                $20.00
                                        </div>
                                </div>
                                <div class="row item">
                                        <div class="col-xs-4 desc">
                                                Landing Web Design 
                                        </div>
                                        <div class="col-xs-3 qty">
                                                2
                                        </div>
                                        <div class="col-xs-5 amount text-right">
                                                $18.00
                                        </div>
                                </div>
                        </div>
                        <div class="total text-right">
                                <p class="extra-notes">
                                        <strong>Extra Notes</strong>
                                        Please send all items at the same time to shipping address by next week.
                                        Thanks a lot.
                                </p>
                                <div class="field">
                                        Subtotal <span>$379.00</span>
                                </div>
                                <div class="field">
                                        Shipping <span>$0.00</span>
                                </div>
                                <div class="field">
                                        Discount <span>4.5%</span>
                                </div>
                                <div class="field grand-total">
                                        Total <span>$312.00</span>
                                </div>
                        </div>

                        <div class="print">
                                <a href="#">
                                        <i class="fa fa-print"></i>
                                        Print this receipt
                                </a>
                        </div>
                </div>
        </div>
</div>
        </div>  
    </div>


    
</body>
			  	<div class="form-group form-actions">
		      		<button   data-step="2"  class="btn btn-default" >
		      			<span>返回</span>
		      		</button>
			  	</div>
			</div>


	

<!--第二页-->
			<div class="step">


      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-body">
              <table  id="example1" class="table table-bordered table-striped">
               <thead> 
                <tr>
                  <th>GROUP</th>
                  <th>IP</th>
                  <th>region</th>
                  <th>测试主机</th>
                  <th>备注</th>
                  <th>操作</th>
                </tr>
                </thead>
                <tbody>
{% for list in LIST %}
                        <tr name={{forloop.counter}}>
                                <th class=jcgroup>{{list.group}}</th>
                                <th class=jcip>{{list.ip}}</th>
                                <th class=jcregion>{{list.region}}</th>
                                <th class=jctestserver>{{list.testserver}}</th>
                                <th class=jccomment>{{list.comment}}</th>
                                <th width="500">
                                        <button type="submit" class="jcchange btn btn-success btn-sm " id=jcchange{{forloop.counter}} data-step="3" onclick="javascript:window.location.href='#'">
                                                <span>编辑</span>
                                        </button>
                                        <button type="submit" class="lschange btn btn-success btn-sm" id=lschange{{forloop.counter}}  data-step="4" onclick="javascript:window.location.href='#'">
                                                <span>历史版本</span>
                                        </button>
                                        <button type="submit" class="glchange btn btn-success btn-sm" id=glchange{{forloop.counter}}  data-step="5" onclick="javascript:window.location.href='#'">
                                                <span>域名</span>
                                        </button>
                                        <button id=jcdel{{forloop.counter}} class="btn btn-danger btn-sm adel">删除</button>
                                        <button id=jcxz{{forloop.counter}} class="btn btn-primary btn-sm">线上版本</button>
                                        <button style='background-color:#C0C0C0;border-color:#C0C0C0' class="btn btn-primary btn-sm jctest">测试</button>
                                        <button style='background-color:#C0C0C0;border-color:#C0C0C0' class="btn btn-primary btn-sm hide jcreboot">重启</button>

                                </th>
                        </tr>
{% endfor %}


                </tbody>
              </table>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->


			  	<div class="form-group form-actions">
			  		<a class="btn btn-default" onclick="javascript:window.location.href='apacheblur'">
			  			<span>返回</span>
			  		</a>
			  	</div>
			</div>


<!--第三页 -->
			<div class="step">
				<div class="form-group">
				    <label>Group</label>
				    <input id=itemgroup type="text" class="form-control"  name="customer[first_name]" />
			  	</div>
				<div class="form-group">
				    <label>IP</label>
				    <input id=itemip type="text" class="form-control" name="customer[email]" />
			  	</div>

			  	<div class="form-group">
				    <label>测试主机</label>
				    <input id=itemtestserver type="text" class="form-control" name="customer[email]" />
			  	</div>

			  	<div class="hide">
				    <label>测试主机</label>
				    <input id=itemnumber type="text" class="form-control" name="customer[email]" />
			  	</div>

				<div class="form-group">
				    <label>region</label>
				    <select id=itemregion  class="fake-select-wrap">
                        		<option value="CT">电信</option>
                        		<option value="CNC">网通</option>
                    			</select>
			  	</div>
				
			  	<div class="form-group">
				    <label>备注</label>
				    <input id=itemcomment type="text" class="form-control" name="customer[email]" />
			  	</div>

			  	<div class="form-group form-actions">
			  		<a class="btn btn-default" href="#" data-step="2">
			  			<span>返回</span>
			  		</a>
		      		<button type="submit" class="btn btn-success" data-step="2"  id='jcxisubmit'>
		      			<span class='tijiao'>提交</span>
		      		</button>
			  	</div>
			</div>


<!--第四页-->
			<div class="step">
    <section class="content">
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-body">
              <table name='{Table}'  id="example2" class="table table-bordered table-striped">
               <thead>
                <tr>
                  <th>版本</th>
                  <th>group</th>
                  <th>region</th>
                  <th>操作信息</th>
                  <th>操作人</th>
                  <th>操作时间</th>
                  <th>操作</th>
                </tr>
                </thead>
                <tbody>

{% include "adminlte/_history_apache.html" %}

                </tbody>
              </table>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    </section>
    <!-- /.content -->
                                <div class="form-group form-actions">
                                        <a class="btn btn-default" href="#" data-step="2">
                                                <span>返回</span>
                                        </a>
                                </div>
			</div>

<!--第五页-->
  <div class="step">
    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-body">
              <table  id="example3" class='table table-bordered table-striped'>
               <thead>
                <tr>
		   <th class='hide'></th>
                  <th>ServerName</th>
                  <th>操作</th>
                </tr>
                </thead >
                <tbody id=servername>
{% for list in ITEM %}
                  <tr class='edit hide'>
			  <th class='hide'>{{list.ip}}</th>
                          <th>{{list.servername}}</th>
                          <th>
                                  <button id={{list.id}} type=submit class='achange btn btn-success btn-sm'>
                                          <span>域名编辑</span>
                                  </button>
                                  <button type=submit class='btn btn-primary btn-sm'>
                                          <span>WORK编辑</span>
                                  </button>
                                  <button  class='btn btn-danger btn-sm adel'>删除</button>
                          </th>
                  </tr>
{%endfor%}

                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>
                                <div class="form-group form-actions">
                                        <a class="btn btn-default" href="#" data-step="2">
                                                <span>返回</span>
                                        </a>
                                </div>
  </div>

			</div>


	</section>



{% for list in ITEM %}
                        <div style='z-index:9999' id=content{{list.id}} class='change'>
                            <form  method='POST' action="apachedit?id={{list.id}}&ip={{list.ip}}">
{% csrf_token %}
                                <fieldset>
                                     <div class='box-box'>
                                        <textarea name=content class='content' style="height:500px;width:100%;overflow-y:visible;resize: none;">{{list.content}}</textarea>
                                        </div>
                                        <input style='display:none' name=File  value='{Table}'></input>
                                        <div class="form-group">
                                        <label class="col-md-4 control-label" for="cancel"></label>
                                                <div  class="col-md-6">
                                                <a class='ID hide'>{{list.id}}</a>
                                                <a class='IP hide'>{{list.ip}}</a>
                                                  <button  style='background-color: #f4f4f4;color: #444;border-color: #f4f4f4;' class="btn btn-success cancel{{list.id}} acancel" onclick="return false">cancel</button>
                                                  <button  type='submit'  class="changesubmit btn btn-success acancel cancel{{list.id}}" onclick="return false">commit</button>
                                                </div>
                                        </div>
                                     </div>
                                </fieldset>
                            </form>
                        </div>
{% endfor %}



        </div>  
    </div>

    
</body>



{%block jsapache%}
<script  src="application-851b8fea8f29120d8b765082481c5168.js"></script>
{%endblock%}
<script src="plugins/datatables/jquery.dataTables.min.js"></script>
<script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
<script>
  $(function () {
    $('#example1,#example2,#example3').DataTable({
      "paging": false,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false
    });
  });



 $('.jcchange').click(function(){
               var IP = $(this).parents().children('.jcip').html();
               var GROUP = $(this).parents().children('.jcgroup').html();
               var TESTSERVER = $(this).parents().children('.jctestserver').html();
               var COMMENT = $(this).parents().children('.jccomment').html();
	       var REGION = $(this).parents().children('.jcregion').html();
	       var ITEMNUMBER = $(this).parents('tr').attr("name");
	       $('#itemip').val(IP);
	       $('#itemtestserver').val(TESTSERVER);
	       $('#itemgroup').val(GROUP);
	       $('#itemcomment').val(COMMENT);
               $("#itemregion").val(REGION);
	       $('#itemnumber').val(ITEMNUMBER);
        });
      

//$('.tijiao').click(function(){
//	var ip = document.getElementById("itemip").value;
//	var testserver = document.getElementById("itemtestserver").value;
//	var group = document.getElementById("itemgroup").value;
//	var comment = document.getElementById("itemcomment").value;
//	var region = document.getElementById("itemregion").value;
//	$.ajax({
//		type:"GET",
//		url:"/admin/apachedit",
//		data:{'ip':ip,'testserver':testserver,'group':group,'comment':comment,'region':region},
//		success:function(data){
//		}
//	
//	});
//  });
//


$('#jcxisubmit').click(function(){
	var IP = $('#itemip').val();
	var GROUP = $('#itemgroup').val();
	var TESTSERVER = $('#itemtestserver').val();
	var COMMENT = $('#itemcomment').val();
	var REGION = $('#itemregion').val();
	var ITEMNUMBER = $('#itemnumber').val();
	$.ajax({
                type:"GET",
                url:"apachejcxiedit",
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':'{{ csrf_token }}','IP':IP,'TESTSERVER':TESTSERVER,'GROUP':GROUP,'COMMENT':COMMENT,'REGION':REGION},
                success:function(data){
			$("tr[name="+ITEMNUMBER+"]").find('.jcip').html(IP);
			$("tr[name="+ITEMNUMBER+"]").find('.jcgroup').html(GROUP);
			$("tr[name="+ITEMNUMBER+"]").find('.jctestserver').html(TESTSERVER);
			$("tr[name="+ITEMNUMBER+"]").find('.jccomment').html(COMMENT);
			$("tr[name="+ITEMNUMBER+"]").find('.jcregion').html(REGION);
                },
	        error:function(e,m,t){
                }
        
        });
	
}); 


  $('.achange').click(function(){
                var COUNT = $(this).attr("id")
                $(this).parents().children('#content'+COUNT).toggleClass('show');
  });
  $('.acancel').click(function(){
        $(this).parents('.change').toggleClass('show');
  });

  $('.changesubmit').click(function(){
        var ID=$(this).parents().children('a.ID').html();
        var IP=$(this).parents().children('a.IP').html();
        var content=$('#content'+ID).find("textarea").val()
        $.ajax({
                type: "POST",
                url: "apachedit",
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':'{{ csrf_token }}','ip':IP,'id':ID,'content':content},
                success: function(data){
                },
                error:function(e,m,t){
                }

        });
  });



  $('.glchange').click(function(){
	var ITEMNUMBER = $(this).parents('tr').attr("name");
        var IP=$("tr[name="+ITEMNUMBER+"]").find('.jcip').html();
	$(".edit").each(function () {
                if ($(this).find("th:first").html() == IP) {
                    $(this).removeClass('hide');
                }else{
			$(this).addClass('hide')
		};
            });
		
  });


 $('.jctest').click(function(){
	$(this).parents().children('.jcreboot').removeClass('hide')
 });

</script>

</html>

{% endblock %}
