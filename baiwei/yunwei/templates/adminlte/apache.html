{% extends "adminlte/base.html" %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
<link rel="stylesheet" type="text/css" href="loader.css">
  	<link data-turbolinks-track="true" href="application-b9abcf044a0bc3e705568d103eddd00e.css" media="all" rel="stylesheet" />
</head>


<style>
.con {
        height:30px;
        background:#dd4b39;
        border-color: #d73925;
}
.change  {
    position: fixed;
    background: rgba(0, 0, 0, 0.58);
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    display:none;
}

.change > form {
    background: white;
    margin: 40px auto;
    width: 580px;
    padding: 30px;
    border-radius: 3px;
    box-shadow: 0 0 53px rgba(0, 0, 0, 0.15);
}


.Bchange  {
    position: fixed;
    background: rgba(0, 0, 0, 0.58);
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    display:none;
}

.Bchange > form {
    background: white;
    margin: 40px auto;
    width: 580px;
    padding: 30px;
    border-radius: 3px;
    box-shadow: 0 0 53px rgba(0, 0, 0, 0.15);
}

</style>


    <script src="Apacheset.js" type="text/javascript"></script>



<body id="wizard">
          

<div>
	<div class="header">
		<div class="sidebar-toggler visible-xs">
			<i class="ion-navicon"></i>
		</div>

		<div class="steps clearfix">
			<div class="step active">
				搜   索	
				<span></span>
			</div>
			<div class="step active">
				主机列表	
				<span></span>
			</div>
			<div class="step">
				基础信息	
				<span></span>
			</div>
			<div class="step">
				历史记录	
				<span></span>
			</div>

			<div class="step">
				域名列表
				<span></span>
			</div>
		</div>
	</div>
{% csrf_token %}




      <section class="form-wizard">

	<div class="step active animated fadeInRightStep">

          <div class="box">
            <div class="box-body">
              <table  id="example1" class="table table-bordered table-striped">
               <thead>
                <tr>
                  <th>GROUP</th>
                  <th>IP</th>
                  <th>region</th>
                  <th>测试主机</th>
                  <th>备注</th>
                  <th>操作</th>
                </tr>
                </thead>
                <tbody >
{% for list in LIST %}
                        <tr name={{forloop.counter}}>
                                <th class=jcgroup>{{list.groupid}}</th>
                                <th class=jcip>{{list.ip}}</th>
                                <th class=jcregion>{{list.region}}</th>
                                <th class=jctestserver>{{list.testserver}}</th>
                                <th class=jccomment>{{list.comment}}</th>
                                <th width="500">
                                        <button type="submit" class="jcchange btn btn-success btn-sm " id=jcchange{{forloop.counter}} data-step="3" onclick="javascript:window.location.href='#'">
                                                <span>编辑</span>
                                        </button>
                                        <button type="submit" class="lschange btn btn-success btn-sm" id=lschange{{forloop.counter}}  data-step="4" onclick="javascript:window.location.href='#'">
                                                <span>历史版本</span>
                                        </button>
                                        <button type="submit" class="glchange btn btn-success btn-sm" id=glchange{{forloop.counter}}  data-step="5" onclick="javascript:window.location.href='#'">
                                                <span>域名</span>
                                        </button>
                                        <button id=jcdel{{forloop.counter}} class="btn btn-danger btn-sm adel">删除</button>
                                        <button id=jcxz{{forloop.counter}} class="btn btn-primary btn-sm">线上版本</button>
                                        <button name={{list.groupid}} style='background-color:#C0C0C0;border-color:#C0C0C0'  class="{{list.groupid}} btn btn-primary btn-sm jctest" >测试</button>
                                        <button style='background-color:#C0C0C0;border-color:#C0C0C0' class="btn btn-primary btn-sm hide jcreboot">重启</button>

                                </th>
                        </tr>
{% endfor %}

                </tbody>
              </table>
            </div>
          </div>
			  	<div class="form-group form-actions">
		      		<button    class="btn btn-default" onclick="javascript:window.location.href='apacheblur'">
		      			<span>返回</span>
		      		</button>
			  	</div>
			</div>


	

<!--第二页-->
			<div class="step">


      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-body">
              <table  id="example1" class="table table-bordered table-striped">
               <thead> 
                <tr>
                  <th>GROUP</th>
                  <th>IP</th>
                  <th>region</th>
                  <th>测试主机</th>
                  <th>备注</th>
                  <th>操作</th>
                </tr>
                </thead>
                <tbody>
{% for list in LIST %}
                        <tr name={{forloop.counter}}>
                                <th class=jcgroup>{{list.groupid}}</th>
                                <th class=jcip>{{list.ip}}</th>
                                <th class=jcregion>{{list.region}}</th>
                                <th class=jctestserver>{{list.testserver}}</th>
                                <th class=jccomment>{{list.comment}}</th>
                                <th width="500">
                                        <button type="submit" class="jcchange btn btn-success btn-sm " id=jcchange{{forloop.counter}} data-step="3" onclick="javascript:window.location.href='#'">
                                                <span>编辑</span>
                                        </button>
                                        <button type="submit" class="lschange btn btn-success btn-sm" id=lschange{{forloop.counter}}  data-step="4" onclick="javascript:window.location.href='#'">
                                                <span>历史版本</span>
                                        </button>
                                        <button type="submit" class="glchange btn btn-success btn-sm" id=glchange{{forloop.counter}}  data-step="5" onclick="javascript:window.location.href='#'">
                                                <span>域名</span>
                                        </button>
                                        <button id=jcdel{{forloop.counter}} class="btn btn-danger btn-sm adel">删除</button>
                                        <button id=jcxz{{forloop.counter}} class="btn btn-primary btn-sm">线上版本</button>

                                        <button name={{list.groupid}} style='background-color:#C0C0C0;border-color:#C0C0C0' class="{{list.groupid}} btn btn-primary btn-sm jctest" >测试</button>
                                        <button style='background-color:#C0C0C0;border-color:#C0C0C0' class="btn btn-primary btn-sm hide jcreboot">重启</button>

                                </th>
                        </tr>
{% endfor %}


                </tbody>
              </table>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->


			  	<div class="form-group form-actions">
			  		<a class="btn btn-default" onclick="javascript:window.location.href='apacheblur'">
			  			<span>返回</span>
			  		</a>
			  	</div>
			</div>


<!--第三页 -->
			<div class="step">
				<div class="form-group">
				    <label>Group</label>
				    <input id=itemgroup type="text" class="form-control"  name="customer[first_name]" readonly>
			  	</div>
				<div class="form-group">
				    <label>IP</label>
                                        <textarea id=itemip class='form-control' style="width:20%;overflow-y:visible;resize: none;">{{list.content}}</textarea>
			  	</div>
			  	<div class="form-group">
				    <label>测试主机</label>
				    <input id=itemtestserver type="text" class="form-control" name="customer[email]" />
			  	</div>

			  	<div class="hide">
				    <label>测试主机</label>
				    <input id=itemnumber type="text" class="form-control" name="customer[email]" />
			  	</div>

				<div class="form-group">
				    <label>region</label>
				    <select id=itemregion  class="fake-select-wrap" disabled="disabled">
                        		<option value="CT">电信</option>
                        		<option value="CNC">网通</option>
                    			</select>
			  	</div>
				
			  	<div class="form-group">
				    <label>备注</label>
				    <input id=itemcomment type="text" class="form-control" name="customer[email]" />
			  	</div>

			  	<div class="form-group form-actions">
			  		<a class="btn btn-default" href="#" data-step="2">
			  			<span>返回</span>
			  		</a>
		      		<button type="submit" class="btn btn-success" data-step="2"  id='jcxisubmit'>
		      			<span class='tijiao'>提交</span>
		      		</button>
			  	</div>
			</div>


<!--第四页-->
			<div class="step">
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-body">
              <table name='{Table}'  id="example3" class="table table-bordered table-striped">
               <thead>
                <tr>
                  <th>版本</th>
                  <th>group</th>
                  <th>region</th>
                  <th>操作信息</th>
                  <th>操作人</th>
                  <th>操作时间</th>
                  <th>操作</th>
                </tr>
                </thead>
                <tbody>

{% include "adminlte/_history_apache.html" %}

                </tbody>
              </table>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    <!-- /.content -->
                                <div class="form-group form-actions">
                                        <a class="btn btn-default" href="#" data-step="2">
                                                <span>返回</span>
                                        </a>
                                </div>
			</div>

<!--第五页-->
  <div class="step">
    <!-- Main content -->
              <table  id="example2" class='table table-bordered table-striped'>
               <thead>
                <tr>
		   <th class='hide'></th>
                  <th>ServerName</th>
                  <th>操作</th>
                </tr>
                </thead >
                <tbody id=servername>
	                <button type=submit style='float:right;' class='add btn btn-primary  btn-sm'>
                                    <span>新增</span>
                        </button>
{% for list in ITEM %}
                  <tr class='a{{list.id}} edit'>
			  <th class='edgroup hide'>{{list.groupid}}</th>
                          <th class='edservername'>{{list.servername}}</th>
                          <th>
                                  <button id={{list.id}} type=submit class='achange btn btn-success btn-sm'>
                                          <span>域名编辑</span>
                                  </button>
                                  <button  class='changedel btn btn-danger btn-sm adel'>删除</button>
                                  <textarea class='hide'>{{list.content}}</textarea>
                          </th>
                  </tr>

{%endfor%}



                </tbody>
              </table>
                                <div class="form-group form-actions">
                                        <a class="btn btn-default" href="#" data-step="2">
                                                <span>返回</span>
                                        </a>
                                </div>
	</section>






{% for list in ITEM %}
                        <div style='z-index:9999' id=content{{list.id}} class='change'>
                            <form  method='POST' >
{% csrf_token %}
                                <fieldset>
                                                  <button  type='submit' style='float:left'  class=" btn-primary " onclick="return false">{{list.groupid}}　{{list.ip}}</button>
                                     <div class='box-box'>
                                        <textarea name=content class='content' style="height:500px;width:100%;overflow-y:visible;resize: none;">{{list.content}}</textarea>
                                     </div>
                                        <input style='display:none' name=File  value='{Table}'></input>
                                        <div class="form-group">
                                        <label class="col-md-4 control-label" for="cancel"></label>
                                                <div  class="col-md-6">
                                                <a class='ID hide'>{{list.id}}</a>
                                                <a class='IP hide'>{{list.ip}}</a>
                                                <a class='GROUP hide'>{{list.groupid}}</a>
                                                <a class='TESTSERVER hide'>{{list.testserver}}</a>
                                                <a class='COMMENT hide'>{{list.comment}}</a>
                                                  <button  style='background-color: #f4f4f4;color: #444;border-color: #f4f4f4;' class="btn btn-success cancel{{list.id}} acancel" onclick="return false">cancel</button>
                                                  <button  type='submit'  class="changesubmit btn btn-success acancel cancel{{list.id}}" onclick="return false">commit</button>
                                                </div>
                                                  <button  type='submit' style='background-color: #f4f4f4;color: #444;border-color: #f4f4f4;'  class="bchange btn btn-primary " name={{list.groupid}} onclick="return false">worker</button>
                                        </div>
                                </fieldset>
                            </form>

                        </div>
{% endfor %}




                        <div style='z-index:9999' id=content class='change'>
                            <form  method='POST' >
                                <fieldset>
			<button  type='submit' style='float:left'  class="xzbutton btn-primary " onclick="return false">null</button>
                                     <div class='box-box'>
                                        <textarea name=content class='content' style="height:500px;width:100%;overflow-y:visible;resize: none;"></textarea>
                                     </div>
                                        <input style='display:none' name=File  value='{Table}'></input>
                                        <div class="form-group">
                                        <label class="col-md-4 control-label" for="cancel"></label>
                                                <div  class="col-md-6">
                                                <a class='xzIP hide'>null</a>
                                                <a class='xzGROUP hide'>null</a>
                                                <a class='xzTESTSERVER hide'>null</a>
                                                <a class='xzCOMMENT hide'>null</a>
                                                  <button  style='background-color: #f4f4f4;color: #444;border-color: #f4f4f4;' class="btn btn-success cancel acancel" onclick="return false">cancel</button>
                                                  <button  type='submit'  class="xzsubmit btn btn-success acancel cancel" onclick="return false">commit</button>
                                                </div>
                                                  <button  type='submit' style='background-color: #f4f4f4;color: #444;border-color: #f4f4f4;'  class="bchange btn btn-primary " name=beta onclick="return false">worker</button>
                                        </div>
                                </fieldset>
                            </form>

                        </div>











                        <div style='z-index:9999' id=Content class='Bchange'>



	<form id="apacheworker" class="form-horizontal" method="get"  role="form" novalidate="novalidate">
	  	<div class="form-group">
		    <label class="col-sm-2 col-md-2 control-label">项目</label>
		    <div class="col-sm-10 col-md-8">
		      <input type="text" class="form-control" name="module">
		    </div>
	  	</div>
	  	<div class="form-group">
		    <label class="col-sm-2 col-md-2 control-label">端口</label>
		    <div class="col-sm-10 col-md-8">
		      <input type="text" class="form-control" name="port">
		    </div>
	  	</div>

		<div class="form-group">
		    <label for="inputPassword3" class="col-sm-2 col-md-2 control-label">操作</label>
		    <div class="col-sm-10 col-md-8">
		    	<select name=server class="form-control valid"  data-smart-select="">
		    		<option value=""></option>
		    		<option value="add">添加</option>
		    		<option value="delete">删除</option>
		    		<option value="change">修改</option>
		    	</select><div class="fake-select"></div></div>
	  	</div>

                <div class="form-group">
                    <label class="col-sm-2 col-md-2 control-label">集群模式</label>
                    <div class="col-sm-10 col-md-8">
                        <select name=VERSION class="form-control valid" data-smart-select="">
                                <option value="BALANCE">负载均衡</option>
                                <option value="HA">主备</option>
                        </select><div class="fake-select"></div></div>
                </div>


                <div class="form-group">
                    <label for="inputPassword3" class="col-sm-2 col-md-2 control-label">session</label>
                    <div class="col-sm-10 col-md-8">
                        <select name=session class="form-control valid" data-smart-select="">
                                <option value="nosession">无</option>
                                <option value="session">有</option>
                        </select><div class="fake-select"></div></div>
                </div>
	  	<div class="form-group">
		    <label for="inputPassword3" class="col-sm-2 col-md-2 control-label">tomcatIP</label>
		    <div class="col-sm-10 col-md-8">
		    	<textarea class="form-control" rows="4" name="tomcatip"></textarea>
		    </div>
	  	</div>
                <div class="form-group">
                    <label class="col-sm-2 col-md-2 control-label">groupIP</label>
                    <div class="col-sm-10 col-md-8">
                      <input type="text" class="form-control" name="groupip" readonly>
                    </div>
                </div>

	  	<div class="form-group form-actions">
	    	<div class="col-sm-offset-2 col-sm-10">
	    		<a class="bcancel btn btn-default">Cancel</a>
	      		<button type="submit" class="worker btn btn-success bcancel cancel" onclick="return false">Submit</button>
    		</div>
	  	</div>
	</form>




                        </div>
  </div>





    
</body>



{%block jsapache%}
<script  src="application-851b8fea8f29120d8b765082481c5168.js"></script>
{%endblock%}


<script>

  $(function () {
    $("#example1,#example3").DataTable();
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false
    });
  });

 $('.jcchange').click(function(){
               var IP = $(this).parents().children('.jcip').html();
               var GROUP = $(this).parents().children('.jcgroup').html();
               var TESTSERVER = $(this).parents().children('.jctestserver').html();
               var COMMENT = $(this).parents().children('.jccomment').html();
	       var REGION = $(this).parents().children('.jcregion').html();
	       var ITEMNUMBER = $(this).parents('tr').attr("name");
	       $('#itemip').val(IP);
	       $('#itemtestserver').val(TESTSERVER);
	       $('#itemgroup').val(GROUP);
	       $('#itemcomment').val(COMMENT);
               $("#itemregion").val(REGION);
	       $('#itemnumber').val(ITEMNUMBER);
        });
      



$('#jcxisubmit').click(function(){
	var IP = $('#itemip').val();
	var GROUP = $('#itemgroup').val();
	var TESTSERVER = $('#itemtestserver').val();
	var COMMENT = $('#itemcomment').val();
	var REGION = $('#itemregion').val();
	var ITEMNUMBER = $('#itemnumber').val();
	$.ajax({
                type:"GET",
                url:"apachejcxiedit",
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':'{{ csrf_token }}','IP':IP,'TESTSERVER':TESTSERVER,'GROUP':GROUP,'COMMENT':COMMENT,'REGION':REGION},
                success:function(data){
			$("tr[name="+ITEMNUMBER+"]").find('.jcip').html(IP);
			$("tr[name="+ITEMNUMBER+"]").find('.jcgroup').html(GROUP);
			$("tr[name="+ITEMNUMBER+"]").find('.jctestserver').html(TESTSERVER);
			$("tr[name="+ITEMNUMBER+"]").find('.jccomment').html(COMMENT);
			$("tr[name="+ITEMNUMBER+"]").find('.jcregion').html(REGION);
                },
	        error:function(e,m,t){
                }
        
        });
	
}); 




$('.worker').click(function(){
	var server = $(this).parents().find('select[name="server"]').val()
	var VERSION = $(this).parents().find('select[name="VERSION"]').val()
	var session = $(this).parents().find('select[name="session"]').val()
	var module = $(this).parents().find('input[name="module"]').val()
	var port = $(this).parents().find('input[name="port"]').val()
	var tomcatip = $(this).parents().find('textarea[name="tomcatip"]').val()
	var groupip = $(this).parents().find('input[name="groupip"]').val()
       	        $.ajax({
                type:"GET",
                url:"apacheworker",
                data:{'module':module,'port':port,'server':server,'VERSION':VERSION,'session':session,'tomcatip':tomcatip,'groupip':groupip},
                success:function(data){
				alert(data);
                },
                error:function(e,m,t){
                }
        
        }); 
});







  $('.add').click(function(){
		$(this).parents().hasClass('hide')
                $(this).parents().children('#content').toggleClass('show');
  });


  $('.achange').click(function(){
                var COUNT = $(this).attr("id")
                $(this).parents().children('#content'+COUNT).toggleClass('show');
  });


  $('.changedel').click(function(){
	 var ID=$(this).parents().children('.achange').attr('id');
	 var CONTENT = $(this).parents().children('textarea').text();
	 var GROUPID = $(this).parents().parents().children('.edgroup').html();
	 var SERVERNAME = $(this).parents().parents().children('.edservername').html();
	 $.ajax({
                type: "POST",
                url: "apachedel",
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':'{{ csrf_token }}','content':CONTENT,'groupid':GROUPID,'servername':SERVERNAME},
                success: function(data){
				$('.a'+ID).remove()
                },
                error:function(e,m,t){
                }

        });
	
  });

  $('.acancel').click(function(){
        $(this).parents('.change').toggleClass('show');
  });

  $('.bchange').click(function(){
		var GROUPID = $(this).parents().parents().find('.xzGROUP').html()
		$("input[name='groupip']").val(GROUPID)
                $(this).parents().children('#Content').toggleClass('show');
	
  });
  $('.bcancel').click(function(){
        $(this).parents('.Bchange').toggleClass('show');
  });


  $('.changesubmit').click(function(){
        var ID=$(this).parents().children('a.ID').html();
        var IP=$(this).parents().children('a.IP').html();
        var GROUP=$(this).parents().children('a.GROUP').html();
        var TESTSERVER=$(this).parents().children('a.TESTSERVER').html();
        var COMMENT=$(this).parents().children('a.COMMENT').html();
        var content=$('#content'+ID).find("textarea").val()
        $.ajax({
                type: "POST",
                url: "apachedit",
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':'{{ csrf_token }}','ip':IP,'id':ID,'content':content,'groupid':GROUP,'testserver':TESTSERVER,'comment':COMMENT},
                success: function(data){
                },
                error:function(e,m,t){
                }

        });
  });




  $('.xzsubmit').click(function(){
        var IP=$(this).parents().children('a.xzIP').html();
        var GROUP=$(this).parents().children('a.xzGROUP').html();
        var TESTSERVER=$(this).parents().children('a.xzTESTSERVER').html();
        var COMMENT=$(this).parents().children('a.xzCOMMENT').html();
        var content=$('#content').find("textarea").val()
        $.ajax({
                type: "POST",
                url: "apachexz",
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':'{{ csrf_token }}','ip':IP,'content':content,'groupid':GROUP,'testserver':TESTSERVER,'comment':COMMENT},
                success: function(data){
			location.reload();
                },
                error:function(e,m,t){
                }

        });
  });



  $('.glchange').click(function(){
	var GROUP = $(this).parents().parents().children('.jcgroup').html()
	var IP = $(this).parents().parents().children('.jcip').html()
	var COMMENT = $(this).parents().parents().children('.jccomment').html()
	var TESTSERVER = $(this).parents().parents().children('.jctestserver').html()
	$('.xzIP').html(IP)
	$('.xzGROUP').html(GROUP)
	$('.xzTESTSERVER').html(TESTSERVER)
	$('.xzCOMMENT').html(COMMENT)
	$('.xzbutton').html(GROUP+'　'+IP)
	
		
  });





</script>

<script type="text/javascript">
$(document).ready(function(){  

        $.ajax({
                type: "POST",
                url: "apachestatus",
                async:false,
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':$('input[name=\'csrfmiddlewaretoken\']').val()},
                success: function(data){
                                data = eval(data)
                                for(var o in data){ 
                                        var GROUP = data[o].groupid       
                                        //0位 未触发，灰色
                                        if (data[o].testflag == 0){
                                                $('.'+GROUP).css('background-color','#C0C0C0')
                                                $('.'+GROUP).css('border-color','#C0C0C0')
                                        }
                                        //1为进行时，黄色
                                        if (data[o].testflag == 1){
                                                $('.'+GROUP).css('background-color','#f0ad4e')
                                                $('.'+GROUP).css('border-color','#f0ad4e') 
                                        }
                                        //2为错误，红色
                                        if (data[o].testflag == 2){
                                                $('.'+GROUP).css('background-color','#dd4b39')
                                                $('.'+GROUP).css('border-color','#dd4b39') 
                                        }
                                        //3为正确，蓝色
                                        if (data[o].testflag == 3){
                                                $('.'+GROUP).css('background-color','#3276b1')
                                                $('.'+GROUP).css('border-color','#3276b1') 
                                                $('.'+GROUP).parents().children('.jcreboot').removeClass('hide')
                                        }
                                }
                        }
        });


});

function Start(){
        $.ajax({
                type: "POST",
                url: "apachestatus",
                async:false,
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':$('input[name=\'csrfmiddlewaretoken\']').val()},
                success: function(data){
				data = eval(data)
				for(var o in data){ 
					var GROUP = data[o].groupid
					//0位 未触发，灰色
					if (data[o].testflag == 0){
						$('.'+GROUP).css('background-color','#C0C0C0')
						$('.'+GROUP).css('border-color','#C0C0C0')
					}
					//1为进行时，黄色
					if (data[o].testflag == 1){
					        $('.'+GROUP).css('background-color','#f0ad4e')
        					$('.'+GROUP).css('border-color','#f0ad4e') 
					}
					//2为错误，红色
					if (data[o].testflag == 2){
					        $('.'+GROUP).css('background-color','#dd4b39')
        					$('.'+GROUP).css('border-color','#dd4b39') 
					}
					//3为正确，蓝色
					if (data[o].testflag == 3){
					        $('.'+GROUP).css('background-color','#3276b1')
        					$('.'+GROUP).css('border-color','#3276b1') 
						$('.'+GROUP).parents().children('.jcreboot').removeClass('hide')
					}
				}
                        }
        });

        
}


 $('.jctest').click(function(){
	var GROUP = $(this).attr('name')
        $('.'+GROUP).css('background-color','#f0ad4e')
        $('.'+GROUP).css('border-color','#f0ad4e') 


	var TESTSERVER = $(this).parents().children('.jctestserver').html()
	if (!$('.'+GROUP).parents().children('.jcreboot').hasClass('hide')){
		$('.'+GROUP).parents().children('.jcreboot').addClass('hide')
	}
        $.ajax({
                type: "POST",
                url: "apachetest",
                async:false,
                data:{'_':new Date().getTime(),'csrfmiddlewaretoken':$('input[name=\'csrfmiddlewaretoken\']').val(),'GROUP':GROUP,'TESTSERVER':TESTSERVER},
                success: function(data){
			console.log(data)
                        }
        });

	var reftime = 5000;
	var task = setInterval(Start,reftime);//每隔reftime调用loadData方法刷新页面
 });




</script>


</html>

{% endblock %}
