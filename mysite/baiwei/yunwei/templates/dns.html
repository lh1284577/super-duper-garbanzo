{% extends "adminlte/base.html" %}
{% block content %}
<head>
        <link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
        <link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>
        <link href="media/css/style.css" rel="stylesheet" type="text/css"/>
        <link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>
        <link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>
        <link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>
</head>
<body class="page-header-fixed">
	<div >
		<div class="navbar-inner">
			<div class="container-fluid">
				<!-- BEGIN PAGE HEADER-->   
				<div class="row-fluid">
					<div >
        					<div >
							<section class="content-header">
      								<h1>
        								<small></small>
      								</h1>
      								<ol class="breadcrumb">
        								<li><a href="/admin"><i class="fa fa-dashboard"></i> Home</a></li>
        								<li><a href="#">服务管理</a></li>
        								<li><a href="#">dns</a></li>
        								<li class="active">dns配置
									</li>
      								</ol>
    							</section>
						</div>
				<!-- END PAGE HEADER-->
				<!-- BEGIN PAGE CONTENT-->
				<div class="row-fluid">
					<div class="span12">
						<!-- BEGIN SAMPLE FORM PORTLET-->   
						<div class="portlet box blue">
							<div class="portlet-title">
								<form  class="form-horizontal">
								<div class="caption"><i class="icon-reorder"></i>DNS</div>
								<div style='float:right'>
											<button class="caption btn blue" type="submit">记录日志</button>
								</div>
									</form>
							</div>



							<div class="portlet-body form">
								<form name=form1 class="form-horizontal">
{% csrf_token %}
									<input style='display:none' name=people value={{username}} />
									<div class="control-group">
										<label class="control-label">操作</label>
										<div class="controls">
											<select class="span6 chosen" name='FUN' data-placeholder="Choose a Category" tabindex="1">
                  										<option value=""></option>
                  										<option value="add">add</option>
                  										<option value="delete">delete</option>
											</select>
										</div>
									</div>

									<div class="control-group">
										<label class="control-label">dns_server</label>
										<div class="controls">
											<select class="span6 chosen" name='dns_server' data-placeholder="Choose a Category" tabindex="1">
                  										<option value="10.10.100.1,10.10.101.1">阿里云</option>
											</select>
										</div>
									</div>

									<div class="control-group">
										<label class="control-label">ZONE</label>
										<div class="controls">
	<!--
											<input name=KEY_FILE class="span6 m-wrap tooltips" data-trigger="hover" data-original-title="例：ZONE:beta.uledns.com" type="text"  name=KEY_FILE class="span6 m-wrap" />
-->
											<select class="span6 chosen" name='KEY_FILE' data-placeholder="Choose a Category" tabindex="1">
                  										<option value=""></option>
                  										<option value="qa.joindata.com">qa.joindata.com</option>
                  										<option value="qa.51eparty.com">qa.51eparty.com</option>
                  										<option value="pipixia.run">pipixia.run</option>
											</select>
											
											<span class="help-inline"></span>
										</div>
									</div>

									<div class="control-group">
										<label class="control-label">域名</label>
										<div class="controls">
											<input name=DNS type="text" data-trigger="hover" class="span6 m-wrap tooltips" data-trigger="hover" data-original-title="例：域名:a.beta.uledns.com"  />                       
										</div>
									</div>

									<div class="control-group">
										<label class="control-label">IP/域名</label>
										<div class="controls">
											<input name=IP type="text" class="span6 m-wrap tooltips" data-trigger="hover" data-original-title="注：不支持多IP(CNAME时，选择域名)"/>
<div id=cname style='color:red;' class='hide'>注: CNAME 选项,请输入域名</div>
										</div>
									</div>
									<div class="control-group">
										<label class="control-label">OPTIONS</label>
										<div class="controls">
											<select class="cname span6 chosen" name='option' data-placeholder="Choose a Category" tabindex="1">
                  										<option value="A">A</option>
                  										<option value="CNAME">CNAME</option>
											</select>
										</div>
									</div>


<div class="portlet-body">
                                                                <table class="table table-striped table-bordered table-hover table-full-width" id="sample_1">
<tbody>



                                                                        <thead>
                                                                                <tr>
                                                                                        <th>ZONE</th>
                                                                                        <th>KEY</th>
                                                                                </tr>
                                                                        </thead>
                                                                                <tr>
											<td>qa.joindata.com</td>
											<td>qa.joindata.com</td>
                                                                                </tr>
                                                                                <tr>
											<td>qa.51eparty.com</td>
											<td>qa.51eparty.com</td>
                                                                                </tr>
                                                                                <tr>
											<td>pipixia.run</td>
											<td>pipixia.run</td>
                                                                                </tr>

</tbody>
</table>
</div>


									<div class="form-actions">
										<button type="button" class="btn domain">Submit</button>
										<button type="reset"class="btn">Cancel</button>                            
									</div>
								</form>
								<!-- END FORM-->       
							</div>
						</div>
						<!-- END SAMPLE FORM PORTLET-->
					</div>
				</div>
			</div>
			<!-- END PAGE CONTAINER-->
		</div>
	</div>
	</div>
	                <B><font  size="3">执行结果如下:</font></B>
        <div style="width:100%;height:200px">
                <div style="margin-left:50px;margin-top:20px"><pre id=content style="width:50%;height:300px"></pre></div>
        </div>
</div>

	<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<script src="media/js/app.js"></script>
	<!-- END JAVASCRIPTS -->   
<script src="//www.w3school.com.cn/jquery/jquery.js"></script>
<script type="text/javascript">
                $('.cname').click(function(){

    			$(this).change(function(){
    			    var ITEM = $(this).val();//可以在这里做判断选中值
			    if ( ITEM == "CNAME")
				{
                               		$('#cname').removeClass('hide');
				}
				else
				{
					$('#cname').addClass('hide');
				}
    			});//change：每次选择选项获取选中值


                        
                })
</script>



<script type="text/javascript">

        $('.domain').click(function(){

                var people=form1.people.value;
                var FUN=form1.FUN.value;
                var dns_server=form1.dns_server.value;
                var DNS=form1.DNS.value;
                var IP=form1.IP.value;
                var option=form1.option.value;
		var KEY_FILE=form1.KEY_FILE.value;
		
                $.ajax({
                        url:'dnsconfig',
                        data:{'_':new Date().getTime(),'csrfmiddlewaretoken':$('input[name=\'csrfmiddlewaretoken\']').val(),'PEOPLE':people,'FUN':FUN,'DNS_SERVER':dns_server,'KEY_FILE':KEY_FILE,'DNS':DNS,'IP':IP,'OPTION':option},
                        type:'POST',
                        async:false,
                        success:function(data){
				$('#content').html(data.content);
				$('.domain').removeClass('blue');
				$('.domain').addClass(data.color);
                        },
                        error:function(e,m,t){
                        }

                })

        })
</script>

</body>
{% endblock %}
